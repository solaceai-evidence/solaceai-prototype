# API key for Semantic Scholar - used to retrieve paper passages, search results, and metadata
S2_API_KEY=

# API key for Anthropic Claude models - primary LLM for content generation and analysis
ANTHROPIC_API_KEY=

# API key for OpenAI models - used as fallback LLM and for content moderation/validation
OPENAI_API_KEY=

# Modal cloud platform credentials - required when using Modal for remote model deployment
MODAL_TOKEN_ID=
MODAL_TOKEN_SECRET=

# Local reranker service configuration
# Host address for the local reranker service (use 0.0.0.0 for local development)
RERANKER_HOST=0.0.0.0
# Port number for the local reranker service
RERANKER_PORT=10001

# LLM concurrency settings (calls to S2 API are hardcoded to 1 in the pipeline)
# Maximum number of concurrent LLM workers for parallel processing (recommended: 3)
MAX_LLM_WORKERS=3

# Rate limiting configuration - Balanced for laptop prototype with Claude 4 Sonnet
# Conservative settings: ~10% of Claude 4 limits for reliable laptop performance
# Requests per minute - controls API call frequency (120 = moderate load)
RATE_LIMIT_RPM=120
# Input tokens per minute - prevents quota overrun (100K = conservative for laptops)
RATE_LIMIT_ITPM=100000
# Output tokens per minute - controls generation limits (25K = balanced throughput)
RATE_LIMIT_OTPM=25000

# Query processing timeout (in seconds)
# Laptop prototype: 600s (10 min) - increased for concurrent query scenarios
# Single query: ~360s, concurrent queries: up to 600s due to resource sharing
# Production/cloud: Can be reduced to 300-420s for faster hardware
QUERY_TIMEOUT_SECONDS=900

# Query concurrency control - limits simultaneous queries to prevent resource conflicts
# 1 = Sequential (recommended for laptops), 2-5 = Production, -1 = Unlimited
# When increasing, also scale QUERY_TIMEOUT_SECONDS and rate limits proportionally
MAX_CONCURRENT_QUERIES=1

# Reranker timeout settings (in seconds)
# Client timeout when communicating with local reranker service
RERANKER_CLIENT_TIMEOUT=270
# Maximum concurrent reranker requests (1 = sequential processing)
MAX_CONCURRENCY=1
# Request processing timeout in milliseconds for reranker operations
RERANKER_TIMEOUT_MS=270000
# Queue wait timeout in milliseconds before rejecting reranker requests
RERANKER_QUEUE_TIMEOUT_MS=15000

# Query refinement step configuration
# Enable/disable query refinement preprocessing (true = enhanced query analysis)
ENABLE_QUERY_REFINEMENT=true
